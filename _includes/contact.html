<!-- Contact -->
<section class="page-section" id="{{ site.data.sitetext.contact.section | default: " contact" }}">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">{{ site.data.sitetext.contact.title | markdownify | default: Contact
          Us }}</h2><br>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <form action="https://getform.io/f/482945ab-79b5-49fe-a0a6-05bf9701b638"
          novalidate="novalidate" method="POST" id="rc_form">
          <!--name="sentMessage"-->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <input name="name" class="form-control" id="name" type="text" placeholder="お名前" required="required"
                  data-validation-required-message="Please enter your name.">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="_replyto" class="form-control" id="email" type="email" placeholder="メールアドレス"
                  required="required" data-validation-required-message="Please enter your email address.">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="phone" class="form-control" id="phone" type="tel" placeholder="電話番号" required="required"
                  data-validation-required-message="Please enter your phone number.">
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <select id="contactType" style="-webkit-appearance: none;font-size:inherit;padding: 20px;" class="form-control" name="contactType" size="1">
                  {% for type in site.contactType %}
                    <option value="{{ type.name }}">{{ type.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <textarea name="message" class="form-control" id="message" placeholder="お問い合わせ本文" required="required"
                  data-validation-required-message="Please enter a message." style="height: 155px;"></textarea>
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <input type="hidden" name="_subject" id="email-subject" value="Contact Form Submission">
            <div class="clearfix"></div>
            <div class="col-lg-12 text-center">
              <div id="success"></div>
              <div id="recaptcha"></div>
              <button id="sendMessageButton" class="special" type="submit">問い合わせする</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
<!-- End Contact -->
<script>
  var onloadCallback = function() {
    //ウィジェットを表示するメソッド
    grecaptcha.render('recaptcha', {
      'sitekey' : "6LeEBeAaAAAAACZsequqxHYV4DRf47LB4LEvPiuA",
      'callback' : verifyCallback,
      'expired-callback' : expiredCallback
    });
  };
  //チェックを入れて成功した場合に呼び出されるコールバック関数
  var verifyCallback = function(response) { 
    //ウィジェットの要素に verified クラスを設定
    document.getElementById('recaptcha').className = "verified";
    //エラーメッセージを表示する要素
    var recaptchaError = document.getElementById('recaptcha_error');
    if(recaptchaError != null) {
       //エラーメッセージを表示する要素が存在すれば削除
       recaptchaError.parentNode.removeChild(recaptchaError);
    } 
  };
  //期限切れの場合に呼び出されるコールバック関数
  var expiredCallback = function() {
    //verified クラスを削除
    document.getElementById('recaptcha').classList.remove('verified');
  };
</script> 
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<script>
jQuery(function($){
  //送信ボタンがクリックされた場合の処理
  $("#rc_form").submit(function(){
    //エラー表示の初期化
    $("p.error").remove();
    //reCAPTCHA にチェックが入っているかを確認
    //ウィジェットの要素に verified クラスが付与されていない場合
    if(!$('#recaptcha').hasClass('verified')) {
      //エラーメッセージの要素を追加
      $('#recaptcha').append("<p class='error' id='recaptcha_error'>チェックを入れてください</p>");
    }
    //実際のフォームではその他の input 要素などの検証処理も一緒に記述
    
    //.error があれば送信しない
    if($(".error").length > 0){
      //alert("Error");
      return false;
    }
  });
})
</script>
